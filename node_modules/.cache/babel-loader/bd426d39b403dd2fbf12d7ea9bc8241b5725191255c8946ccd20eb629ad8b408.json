{"ast":null,"code":"import { __awaiter } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport Button from '../../button/internal';\nimport FormField from '../../form-field/internal';\nimport { useInternalI18n } from '../../i18n/context';\nimport FocusLock from '../../internal/components/focus-lock';\nimport InternalLiveRegion from '../../live-region/internal';\nimport SpaceBetween from '../../space-between/internal';\nimport { useClickAway } from './click-away';\nimport styles from './styles.css.js';\n// A function that does nothing\nconst noop = () => undefined;\nexport function InlineEditor(_ref) {\n  let {\n    ariaLabels,\n    item,\n    column,\n    onEditEnd,\n    submitEdit,\n    __onRender\n  } = _ref;\n  var _a, _b, _c, _d;\n  const [currentEditLoading, setCurrentEditLoading] = useState(false);\n  const [currentEditValue, setCurrentEditValue] = useState();\n  const i18n = useInternalI18n('table');\n  const focusLockRef = useRef(null);\n  function finishEdit() {\n    let {\n      cancelled = false,\n      refocusCell = true\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!cancelled) {\n      setCurrentEditValue(undefined);\n    }\n    onEditEnd({\n      cancelled,\n      refocusCell: refocusCell\n    });\n  }\n  function handleSubmit() {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      if (currentEditValue === undefined) {\n        finishEdit();\n        return;\n      }\n      setCurrentEditLoading(true);\n      try {\n        yield submitEdit(item, column, currentEditValue);\n        setCurrentEditLoading(false);\n        finishEdit();\n        // Consumers in the past have not always been able to support not specifiying the value so we keep and ignore\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      } catch (e) {\n        setCurrentEditLoading(false);\n        (_a = focusLockRef.current) === null || _a === void 0 ? void 0 : _a.focusFirst();\n      }\n    });\n  }\n  function onFormSubmit(evt) {\n    evt.preventDefault(); // Prevents the form from navigating away\n    evt.stopPropagation(); // Prevents any outer form elements from submitting\n    handleSubmit();\n  }\n  function onCancel() {\n    let {\n      reFocusEditedCell = true\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (currentEditLoading) {\n      return;\n    }\n    finishEdit({\n      cancelled: true,\n      refocusCell: reFocusEditedCell\n    });\n  }\n  function handleEscape(event) {\n    if (event.key === 'Escape') {\n      onCancel();\n    }\n  }\n  const clickAwayRef = useClickAway(() => onCancel({\n    reFocusEditedCell: false\n  }));\n  useEffect(() => {\n    if (__onRender) {\n      const timer = setTimeout(__onRender, 1);\n      return () => clearTimeout(timer);\n    }\n  }, [__onRender]);\n  // asserting non-undefined editConfig here because this component is unreachable otherwise\n  const {\n    ariaLabel = undefined,\n    validation = noop,\n    errorIconAriaLabel,\n    constraintText,\n    editingCell,\n    disableNativeForm\n  } = column.editConfig;\n  const cellContext = {\n    currentValue: currentEditValue,\n    setValue: setCurrentEditValue,\n    submitValue: handleSubmit\n  };\n  const FormElement = disableNativeForm ? 'div' : 'form';\n  return React.createElement(FocusLock, {\n    restoreFocus: true,\n    ref: focusLockRef\n  }, React.createElement(\"div\", {\n    role: \"dialog\",\n    ref: clickAwayRef,\n    \"aria-label\": (_a = ariaLabels === null || ariaLabels === void 0 ? void 0 : ariaLabels.activateEditLabel) === null || _a === void 0 ? void 0 : _a.call(ariaLabels, column, item),\n    onKeyDown: handleEscape\n  }, React.createElement(FormElement, {\n    onSubmit: disableNativeForm ? undefined : onFormSubmit\n  }, React.createElement(FormField, {\n    stretch: true,\n    label: ariaLabel,\n    constraintText: constraintText,\n    __hideLabel: true,\n    __disableGutters: true,\n    i18nStrings: {\n      errorIconAriaLabel\n    },\n    errorText: validation(item, currentEditValue)\n  }, React.createElement(\"div\", {\n    className: styles['body-cell-editor-row']\n  }, React.createElement(\"div\", {\n    className: styles['body-cell-editor-row-editor']\n  }, editingCell(item, cellContext)), React.createElement(\"span\", {\n    className: styles['body-cell-editor-controls']\n  }, React.createElement(SpaceBetween, {\n    direction: \"horizontal\",\n    size: \"xxs\"\n  }, !currentEditLoading ? React.createElement(Button, {\n    ariaLabel: (_b = ariaLabels === null || ariaLabels === void 0 ? void 0 : ariaLabels.cancelEditLabel) === null || _b === void 0 ? void 0 : _b.call(ariaLabels, column),\n    formAction: \"none\",\n    iconName: \"close\",\n    variant: \"inline-icon\",\n    onClick: () => onCancel()\n  }) : null, React.createElement(Button, {\n    ariaLabel: (_c = ariaLabels === null || ariaLabels === void 0 ? void 0 : ariaLabels.submitEditLabel) === null || _c === void 0 ? void 0 : _c.call(ariaLabels, column),\n    formAction: disableNativeForm ? 'none' : 'submit',\n    onClick: disableNativeForm ? handleSubmit : undefined,\n    iconName: \"check\",\n    variant: \"inline-icon\",\n    loading: currentEditLoading\n  })), React.createElement(InternalLiveRegion, {\n    tagName: \"span\",\n    hidden: true\n  }, currentEditLoading ? i18n('ariaLabels.submittingEditText', (_d = ariaLabels === null || ariaLabels === void 0 ? void 0 : ariaLabels.submittingEditText) === null || _d === void 0 ? void 0 : _d.call(ariaLabels, column)) : '')))))));\n}","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","FormField","useInternalI18n","FocusLock","InternalLiveRegion","SpaceBetween","useClickAway","styles","noop","undefined","InlineEditor","_ref","ariaLabels","item","column","onEditEnd","submitEdit","__onRender","currentEditLoading","setCurrentEditLoading","currentEditValue","setCurrentEditValue","i18n","focusLockRef","finishEdit","cancelled","refocusCell","arguments","length","handleSubmit","e","_a","current","focusFirst","onFormSubmit","evt","preventDefault","stopPropagation","onCancel","reFocusEditedCell","handleEscape","event","key","clickAwayRef","timer","setTimeout","clearTimeout","ariaLabel","validation","errorIconAriaLabel","constraintText","editingCell","disableNativeForm","editConfig","cellContext","currentValue","setValue","submitValue","FormElement","createElement","restoreFocus","ref","role","activateEditLabel","call","onKeyDown","onSubmit","stretch","label","__hideLabel","__disableGutters","i18nStrings","errorText","className","direction","size","_b","cancelEditLabel","formAction","iconName","variant","onClick","_c","submitEditLabel","loading","tagName","hidden","_d","submittingEditText"],"sources":["/Users/naman/Desktop/Portfolio/react-portfolio/node_modules/src/table/body-cell/inline-editor.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport Button from '../../button/internal';\nimport FormField from '../../form-field/internal';\nimport { useInternalI18n } from '../../i18n/context';\nimport FocusLock, { FocusLockRef } from '../../internal/components/focus-lock';\nimport { Optional } from '../../internal/types';\nimport InternalLiveRegion from '../../live-region/internal';\nimport SpaceBetween from '../../space-between/internal';\nimport { TableProps } from '../interfaces';\nimport { useClickAway } from './click-away';\n\nimport styles from './styles.css.js';\n\n// A function that does nothing\nconst noop = () => undefined;\n\ninterface OnEditEndOptions {\n  cancelled: boolean;\n  refocusCell: boolean;\n}\n\ninterface InlineEditorProps<ItemType> {\n  ariaLabels: TableProps['ariaLabels'];\n  column: TableProps.ColumnDefinition<ItemType>;\n  item: ItemType;\n  onEditEnd: (options: OnEditEndOptions) => void;\n  submitEdit: TableProps.SubmitEditFunction<ItemType>;\n  __onRender?: () => void;\n}\n\nexport function InlineEditor<ItemType>({\n  ariaLabels,\n  item,\n  column,\n  onEditEnd,\n  submitEdit,\n  __onRender,\n}: InlineEditorProps<ItemType>) {\n  const [currentEditLoading, setCurrentEditLoading] = useState(false);\n  const [currentEditValue, setCurrentEditValue] = useState<Optional<any>>();\n  const i18n = useInternalI18n('table');\n\n  const focusLockRef = useRef<FocusLockRef>(null);\n\n  function finishEdit({ cancelled = false, refocusCell = true }: Partial<OnEditEndOptions> = {}) {\n    if (!cancelled) {\n      setCurrentEditValue(undefined);\n    }\n    onEditEnd({ cancelled, refocusCell: refocusCell });\n  }\n\n  async function handleSubmit() {\n    if (currentEditValue === undefined) {\n      finishEdit();\n      return;\n    }\n\n    setCurrentEditLoading(true);\n    try {\n      await submitEdit(item, column, currentEditValue);\n      setCurrentEditLoading(false);\n      finishEdit();\n\n      // Consumers in the past have not always been able to support not specifiying the value so we keep and ignore\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    } catch (e) {\n      setCurrentEditLoading(false);\n      focusLockRef.current?.focusFirst();\n    }\n  }\n\n  function onFormSubmit(evt: React.FormEvent) {\n    evt.preventDefault(); // Prevents the form from navigating away\n    evt.stopPropagation(); // Prevents any outer form elements from submitting\n    handleSubmit();\n  }\n\n  function onCancel({ reFocusEditedCell = true } = {}) {\n    if (currentEditLoading) {\n      return;\n    }\n    finishEdit({ cancelled: true, refocusCell: reFocusEditedCell });\n  }\n\n  function handleEscape(event: React.KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      onCancel();\n    }\n  }\n\n  const clickAwayRef = useClickAway(() => onCancel({ reFocusEditedCell: false }));\n\n  useEffect(() => {\n    if (__onRender) {\n      const timer = setTimeout(__onRender, 1);\n      return () => clearTimeout(timer);\n    }\n  }, [__onRender]);\n\n  // asserting non-undefined editConfig here because this component is unreachable otherwise\n  const {\n    ariaLabel = undefined,\n    validation = noop,\n    errorIconAriaLabel,\n    constraintText,\n    editingCell,\n    disableNativeForm,\n  } = column.editConfig!;\n\n  const cellContext = {\n    currentValue: currentEditValue,\n    setValue: setCurrentEditValue,\n    submitValue: handleSubmit,\n  };\n\n  const FormElement = disableNativeForm ? 'div' : 'form';\n\n  return (\n    <FocusLock restoreFocus={true} ref={focusLockRef}>\n      <div\n        role=\"dialog\"\n        ref={clickAwayRef}\n        aria-label={ariaLabels?.activateEditLabel?.(column, item)}\n        onKeyDown={handleEscape}\n      >\n        <FormElement onSubmit={disableNativeForm ? undefined : onFormSubmit}>\n          <FormField\n            stretch={true}\n            label={ariaLabel}\n            constraintText={constraintText}\n            __hideLabel={true}\n            __disableGutters={true}\n            i18nStrings={{ errorIconAriaLabel }}\n            errorText={validation(item, currentEditValue)}\n          >\n            <div className={styles['body-cell-editor-row']}>\n              <div className={styles['body-cell-editor-row-editor']}>{editingCell(item, cellContext)}</div>\n              <span className={styles['body-cell-editor-controls']}>\n                <SpaceBetween direction=\"horizontal\" size=\"xxs\">\n                  {!currentEditLoading ? (\n                    <Button\n                      ariaLabel={ariaLabels?.cancelEditLabel?.(column)}\n                      formAction=\"none\"\n                      iconName=\"close\"\n                      variant=\"inline-icon\"\n                      onClick={() => onCancel()}\n                    />\n                  ) : null}\n                  <Button\n                    ariaLabel={ariaLabels?.submitEditLabel?.(column)}\n                    formAction={disableNativeForm ? 'none' : 'submit'}\n                    onClick={disableNativeForm ? handleSubmit : undefined}\n                    iconName=\"check\"\n                    variant=\"inline-icon\"\n                    loading={currentEditLoading}\n                  />\n                </SpaceBetween>\n                <InternalLiveRegion tagName=\"span\" hidden={true}>\n                  {currentEditLoading\n                    ? i18n('ariaLabels.submittingEditText', ariaLabels?.submittingEditText?.(column))\n                    : ''}\n                </InternalLiveRegion>\n              </span>\n            </div>\n          </FormField>\n        </FormElement>\n      </div>\n    </FocusLock>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}