{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useLayoutEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { getLogicalBoundingClientRect, useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport usePopoverPosition from './use-popover-position.js';\nimport usePositionObserver from './use-position-observer';\nimport styles from './styles.css.js';\nexport default function PopoverContainer({\n  position,\n  trackRef,\n  getTrack: externalGetTrack,\n  trackKey,\n  minVisibleBlockSize,\n  arrow,\n  children,\n  zIndex,\n  renderWithPortal,\n  size,\n  fixedWidth,\n  variant,\n  keepPosition,\n  allowScrollToFit,\n  allowVerticalOverflow,\n  hideOnOverscroll,\n  hoverArea,\n  className\n}) {\n  const bodyRef = useRef(null);\n  const contentRef = useRef(null);\n  const popoverRef = useRef(null);\n  const arrowRef = useRef(null);\n  const isRefresh = useVisualRefresh();\n  const getTrack = useRef(() => {\n    if (trackRef) {\n      return trackRef.current;\n    }\n    if (externalGetTrack) {\n      return externalGetTrack();\n    }\n    throw new Error('Invariant violation: must provide either trackRef or getTrack.');\n  });\n  // Updates the position handler.\n  const {\n    updatePositionHandler,\n    popoverStyle,\n    internalPosition,\n    positionHandlerRef,\n    isOverscrolling\n  } = usePopoverPosition({\n    popoverRef,\n    bodyRef,\n    arrowRef,\n    getTrack: getTrack.current,\n    contentRef,\n    allowScrollToFit,\n    allowVerticalOverflow,\n    preferredPosition: position,\n    renderWithPortal,\n    keepPosition,\n    hideOnOverscroll,\n    minVisibleBlockSize\n  });\n  // Recalculate position when properties change.\n  useLayoutEffect(() => {\n    updatePositionHandler();\n  }, [updatePositionHandler, trackKey]);\n  // Recalculate position when content size changes.\n  useResizeObserver(contentRef, () => {\n    updatePositionHandler(true);\n  });\n  // Recalculate position when the DOM changes.\n  // istanbul ignore next - tested via integration tests\n  usePositionObserver(trackRef, trackKey, () => {\n    // Do not update position if popover moved offscreen\n    const popoverOffset = popoverRef.current && getLogicalBoundingClientRect(popoverRef.current);\n    if (keepPosition || !popoverOffset || popoverOffset.insetBlockStart < 0 || popoverOffset.insetBlockEnd > window.innerHeight) {\n      return;\n    }\n    positionHandlerRef.current();\n  });\n  // Recalculate position on resize or scroll events.\n  useLayoutEffect(() => {\n    const controller = new AbortController();\n    const updatePositionOnResize = () => requestAnimationFrame(() => updatePositionHandler(true));\n    const refreshPosition = () => requestAnimationFrame(() => positionHandlerRef.current());\n    window.addEventListener('resize', updatePositionOnResize, {\n      signal: controller.signal\n    });\n    window.addEventListener('scroll', refreshPosition, {\n      capture: true,\n      signal: controller.signal\n    });\n    return () => {\n      controller.abort();\n    };\n  }, [hideOnOverscroll, keepPosition, positionHandlerRef, trackRef, updatePositionHandler]);\n  return isOverscrolling ? null : React.createElement(\"div\", {\n    ref: popoverRef,\n    style: Object.assign(Object.assign({}, popoverStyle), {\n      zIndex\n    }),\n    className: clsx(styles.container, isRefresh && styles.refresh, className)\n  }, React.createElement(\"div\", {\n    ref: arrowRef,\n    className: clsx(styles[`container-arrow`], styles[`container-arrow-position-${internalPosition}`]),\n    \"aria-hidden\": true\n  }, arrow(internalPosition)), React.createElement(\"div\", {\n    ref: bodyRef,\n    className: clsx(styles['container-body'], styles[`container-body-size-${size}`], {\n      [styles['fixed-width']]: fixedWidth,\n      [styles[`container-body-variant-${variant}`]]: variant\n    })\n  }, hoverArea ? React.createElement(\"div\", {\n    className: styles['hover-area']\n  }, React.createElement(\"div\", {\n    ref: contentRef\n  }, children)) : React.createElement(\"div\", {\n    ref: contentRef\n  }, children)));\n}","map":{"version":3,"names":["React","useLayoutEffect","useRef","clsx","getLogicalBoundingClientRect","useResizeObserver","useVisualRefresh","usePopoverPosition","usePositionObserver","styles","PopoverContainer","position","trackRef","getTrack","externalGetTrack","trackKey","minVisibleBlockSize","arrow","children","zIndex","renderWithPortal","size","fixedWidth","variant","keepPosition","allowScrollToFit","allowVerticalOverflow","hideOnOverscroll","hoverArea","className","bodyRef","contentRef","popoverRef","arrowRef","isRefresh","current","Error","updatePositionHandler","popoverStyle","internalPosition","positionHandlerRef","isOverscrolling","preferredPosition","popoverOffset","insetBlockStart","insetBlockEnd","window","innerHeight","controller","AbortController","updatePositionOnResize","requestAnimationFrame","refreshPosition","addEventListener","signal","capture","abort","createElement","ref","style","Object","assign","container","refresh"],"sources":["/Users/naman/Desktop/Portfolio/react-portfolio/node_modules/src/popover/container.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useLayoutEffect, useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { getLogicalBoundingClientRect, useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\n\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { InternalPosition, PopoverProps } from './interfaces';\nimport usePopoverPosition from './use-popover-position.js';\nimport usePositionObserver from './use-position-observer';\n\nimport styles from './styles.css.js';\n\ninterface PopoverContainerProps {\n  /** References the element the container is positioned against. */\n  trackRef?: React.RefObject<HTMLElement | SVGElement>;\n  getTrack?: () => null | HTMLElement | SVGElement;\n  /**\n    Used to update the container position in case track or track position changes:\n\n    const trackRef = useRef<Element>(null)\n    return (<>\n      <Track style={getPosition(selectedItemId)} ref={trackRef} />\n      <PopoverContainer trackRef={trackRef} trackKey={selectedItemId} .../>\n    </>)\n  */\n  trackKey?: string | number;\n  minVisibleBlockSize?: number;\n  position: PopoverProps.Position;\n  zIndex?: React.CSSProperties['zIndex'];\n  arrow: (position: InternalPosition | null) => React.ReactNode;\n  children: React.ReactNode;\n  renderWithPortal?: boolean;\n  size: PopoverProps.Size | 'content';\n  fixedWidth: boolean;\n  variant?: 'annotation';\n  // When keepPosition is true, the popover will not recalculate its position when it resizes nor when it receives clicks.\n  keepPosition?: boolean;\n  // When allowScrollToFit is true, we will scroll to the the popover if it overflows the viewport even when choosing the best possible position for it.\n  // Do not use this if the popover is open on hover, in order to avoid unexpected movement.\n  allowScrollToFit?: boolean;\n  allowVerticalOverflow?: boolean;\n  // Whether the popover should be hidden when the trigger is scrolled away.\n  hideOnOverscroll?: boolean;\n  hoverArea?: boolean;\n  className?: string;\n}\n\nexport default function PopoverContainer({\n  position,\n  trackRef,\n  getTrack: externalGetTrack,\n  trackKey,\n  minVisibleBlockSize,\n  arrow,\n  children,\n  zIndex,\n  renderWithPortal,\n  size,\n  fixedWidth,\n  variant,\n  keepPosition,\n  allowScrollToFit,\n  allowVerticalOverflow,\n  hideOnOverscroll,\n  hoverArea,\n  className,\n}: PopoverContainerProps) {\n  const bodyRef = useRef<HTMLDivElement | null>(null);\n  const contentRef = useRef<HTMLDivElement | null>(null);\n  const popoverRef = useRef<HTMLDivElement | null>(null);\n  const arrowRef = useRef<HTMLDivElement | null>(null);\n\n  const isRefresh = useVisualRefresh();\n\n  const getTrack = useRef(() => {\n    if (trackRef) {\n      return trackRef.current;\n    }\n    if (externalGetTrack) {\n      return externalGetTrack();\n    }\n    throw new Error('Invariant violation: must provide either trackRef or getTrack.');\n  });\n\n  // Updates the position handler.\n  const { updatePositionHandler, popoverStyle, internalPosition, positionHandlerRef, isOverscrolling } =\n    usePopoverPosition({\n      popoverRef,\n      bodyRef,\n      arrowRef,\n      getTrack: getTrack.current,\n      contentRef,\n      allowScrollToFit,\n      allowVerticalOverflow,\n      preferredPosition: position,\n      renderWithPortal,\n      keepPosition,\n      hideOnOverscroll,\n      minVisibleBlockSize,\n    });\n\n  // Recalculate position when properties change.\n  useLayoutEffect(() => {\n    updatePositionHandler();\n  }, [updatePositionHandler, trackKey]);\n\n  // Recalculate position when content size changes.\n  useResizeObserver(contentRef, () => {\n    updatePositionHandler(true);\n  });\n\n  // Recalculate position when the DOM changes.\n  // istanbul ignore next - tested via integration tests\n  usePositionObserver(trackRef, trackKey, () => {\n    // Do not update position if popover moved offscreen\n    const popoverOffset = popoverRef.current && getLogicalBoundingClientRect(popoverRef.current);\n\n    if (\n      keepPosition ||\n      !popoverOffset ||\n      popoverOffset.insetBlockStart < 0 ||\n      popoverOffset.insetBlockEnd > window.innerHeight\n    ) {\n      return;\n    }\n\n    positionHandlerRef.current();\n  });\n\n  // Recalculate position on resize or scroll events.\n  useLayoutEffect(() => {\n    const controller = new AbortController();\n\n    const updatePositionOnResize = () => requestAnimationFrame(() => updatePositionHandler(true));\n    const refreshPosition = () => requestAnimationFrame(() => positionHandlerRef.current());\n\n    window.addEventListener('resize', updatePositionOnResize, { signal: controller.signal });\n    window.addEventListener('scroll', refreshPosition, { capture: true, signal: controller.signal });\n\n    return () => {\n      controller.abort();\n    };\n  }, [hideOnOverscroll, keepPosition, positionHandlerRef, trackRef, updatePositionHandler]);\n\n  return isOverscrolling ? null : (\n    <div\n      ref={popoverRef}\n      style={{ ...popoverStyle, zIndex }}\n      className={clsx(styles.container, isRefresh && styles.refresh, className)}\n    >\n      <div\n        ref={arrowRef}\n        className={clsx(styles[`container-arrow`], styles[`container-arrow-position-${internalPosition}`])}\n        aria-hidden={true}\n      >\n        {arrow(internalPosition)}\n      </div>\n\n      <div\n        ref={bodyRef}\n        className={clsx(styles['container-body'], styles[`container-body-size-${size}`], {\n          [styles['fixed-width']]: fixedWidth,\n          [styles[`container-body-variant-${variant}`]]: variant,\n        })}\n      >\n        {hoverArea ? (\n          <div className={styles['hover-area']}>\n            <div ref={contentRef}>{children}</div>\n          </div>\n        ) : (\n          <div ref={contentRef}>{children}</div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}