{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { isModifierKey } from '../keycode';\nconst frames = new Map();\nfunction setIsKeyboard(active) {\n  if (active) {\n    for (const currentDocument of frames.keys()) {\n      currentDocument.body.setAttribute('data-awsui-focus-visible', 'true');\n    }\n  } else {\n    for (const currentDocument of frames.keys()) {\n      currentDocument.body.removeAttribute('data-awsui-focus-visible');\n    }\n  }\n}\nfunction handleMousedown() {\n  setIsKeyboard(false);\n}\nfunction handleKeydown(event) {\n  if (!isModifierKey(event)) {\n    setIsKeyboard(true);\n  }\n}\nfunction addListeners(currentDocument) {\n  const abortController = new AbortController();\n  currentDocument.addEventListener('mousedown', handleMousedown, {\n    signal: abortController.signal\n  });\n  currentDocument.addEventListener('keydown', handleKeydown, {\n    signal: abortController.signal\n  });\n  return abortController;\n}\nexport function useFocusVisible(componentRef) {\n  useEffect(() => {\n    var _a, _b;\n    const currentDocument = (_b = (_a = componentRef === null || componentRef === void 0 ? void 0 : componentRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) !== null && _b !== void 0 ? _b : document;\n    let frame = frames.get(currentDocument);\n    if (frame) {\n      frame.componentsCount++;\n    } else {\n      const abortController = addListeners(currentDocument);\n      frame = {\n        componentsCount: 1,\n        abortController\n      };\n      frames.set(currentDocument, frame);\n    }\n    return () => {\n      frame.componentsCount--;\n      if (frame.componentsCount === 0) {\n        frame.abortController.abort();\n        frames.delete(currentDocument);\n      }\n    };\n  }, [componentRef]);\n}","map":{"version":3,"names":["useEffect","isModifierKey","frames","Map","setIsKeyboard","active","currentDocument","keys","body","setAttribute","removeAttribute","handleMousedown","handleKeydown","event","addListeners","abortController","AbortController","addEventListener","signal","useFocusVisible","componentRef","_a","_b","current","ownerDocument","document","frame","get","componentsCount","set","abort","delete"],"sources":["/Users/naman/Desktop/Portfolio/react-portfolio/node_modules/@cloudscape-design/component-toolkit/internal/focus-visible/index.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { isModifierKey } from '../keycode';\nconst frames = new Map();\nfunction setIsKeyboard(active) {\n    if (active) {\n        for (const currentDocument of frames.keys()) {\n            currentDocument.body.setAttribute('data-awsui-focus-visible', 'true');\n        }\n    }\n    else {\n        for (const currentDocument of frames.keys()) {\n            currentDocument.body.removeAttribute('data-awsui-focus-visible');\n        }\n    }\n}\nfunction handleMousedown() {\n    setIsKeyboard(false);\n}\nfunction handleKeydown(event) {\n    if (!isModifierKey(event)) {\n        setIsKeyboard(true);\n    }\n}\nfunction addListeners(currentDocument) {\n    const abortController = new AbortController();\n    currentDocument.addEventListener('mousedown', handleMousedown, { signal: abortController.signal });\n    currentDocument.addEventListener('keydown', handleKeydown, { signal: abortController.signal });\n    return abortController;\n}\nexport function useFocusVisible(componentRef) {\n    useEffect(() => {\n        var _a, _b;\n        const currentDocument = (_b = (_a = componentRef === null || componentRef === void 0 ? void 0 : componentRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) !== null && _b !== void 0 ? _b : document;\n        let frame = frames.get(currentDocument);\n        if (frame) {\n            frame.componentsCount++;\n        }\n        else {\n            const abortController = addListeners(currentDocument);\n            frame = { componentsCount: 1, abortController };\n            frames.set(currentDocument, frame);\n        }\n        return () => {\n            frame.componentsCount--;\n            if (frame.componentsCount === 0) {\n                frame.abortController.abort();\n                frames.delete(currentDocument);\n            }\n        };\n    }, [componentRef]);\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,aAAa,QAAQ,YAAY;AAC1C,MAAMC,MAAM,GAAG,IAAIC,GAAG,CAAC,CAAC;AACxB,SAASC,aAAaA,CAACC,MAAM,EAAE;EAC3B,IAAIA,MAAM,EAAE;IACR,KAAK,MAAMC,eAAe,IAAIJ,MAAM,CAACK,IAAI,CAAC,CAAC,EAAE;MACzCD,eAAe,CAACE,IAAI,CAACC,YAAY,CAAC,0BAA0B,EAAE,MAAM,CAAC;IACzE;EACJ,CAAC,MACI;IACD,KAAK,MAAMH,eAAe,IAAIJ,MAAM,CAACK,IAAI,CAAC,CAAC,EAAE;MACzCD,eAAe,CAACE,IAAI,CAACE,eAAe,CAAC,0BAA0B,CAAC;IACpE;EACJ;AACJ;AACA,SAASC,eAAeA,CAAA,EAAG;EACvBP,aAAa,CAAC,KAAK,CAAC;AACxB;AACA,SAASQ,aAAaA,CAACC,KAAK,EAAE;EAC1B,IAAI,CAACZ,aAAa,CAACY,KAAK,CAAC,EAAE;IACvBT,aAAa,CAAC,IAAI,CAAC;EACvB;AACJ;AACA,SAASU,YAAYA,CAACR,eAAe,EAAE;EACnC,MAAMS,eAAe,GAAG,IAAIC,eAAe,CAAC,CAAC;EAC7CV,eAAe,CAACW,gBAAgB,CAAC,WAAW,EAAEN,eAAe,EAAE;IAAEO,MAAM,EAAEH,eAAe,CAACG;EAAO,CAAC,CAAC;EAClGZ,eAAe,CAACW,gBAAgB,CAAC,SAAS,EAAEL,aAAa,EAAE;IAAEM,MAAM,EAAEH,eAAe,CAACG;EAAO,CAAC,CAAC;EAC9F,OAAOH,eAAe;AAC1B;AACA,OAAO,SAASI,eAAeA,CAACC,YAAY,EAAE;EAC1CpB,SAAS,CAAC,MAAM;IACZ,IAAIqB,EAAE,EAAEC,EAAE;IACV,MAAMhB,eAAe,GAAG,CAACgB,EAAE,GAAG,CAACD,EAAE,GAAGD,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACG,OAAO,MAAM,IAAI,IAAIF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,aAAa,MAAM,IAAI,IAAIF,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGG,QAAQ;IACtN,IAAIC,KAAK,GAAGxB,MAAM,CAACyB,GAAG,CAACrB,eAAe,CAAC;IACvC,IAAIoB,KAAK,EAAE;MACPA,KAAK,CAACE,eAAe,EAAE;IAC3B,CAAC,MACI;MACD,MAAMb,eAAe,GAAGD,YAAY,CAACR,eAAe,CAAC;MACrDoB,KAAK,GAAG;QAAEE,eAAe,EAAE,CAAC;QAAEb;MAAgB,CAAC;MAC/Cb,MAAM,CAAC2B,GAAG,CAACvB,eAAe,EAAEoB,KAAK,CAAC;IACtC;IACA,OAAO,MAAM;MACTA,KAAK,CAACE,eAAe,EAAE;MACvB,IAAIF,KAAK,CAACE,eAAe,KAAK,CAAC,EAAE;QAC7BF,KAAK,CAACX,eAAe,CAACe,KAAK,CAAC,CAAC;QAC7B5B,MAAM,CAAC6B,MAAM,CAACzB,eAAe,CAAC;MAClC;IACJ,CAAC;EACL,CAAC,EAAE,CAACc,YAAY,CAAC,CAAC;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}