{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { getIsRtl, getLogicalBoundingClientRect, getScrollInlineStart, Portal } from '@cloudscape-design/component-toolkit/internal';\nimport styles from './styles.css.js';\nexport default function PortalOverlay({\n  track,\n  isDisabled,\n  children\n}) {\n  const ref = useRef(null);\n  const [container, setContainer] = useState(null);\n  useLayoutEffect(() => {\n    if (track.current) {\n      const newContainer = track.current.ownerDocument.createElement('div');\n      track.current.ownerDocument.body.appendChild(newContainer);\n      setContainer(newContainer);\n      return () => newContainer.remove();\n    }\n  }, [track]);\n  useEffect(() => {\n    if (track.current === null || isDisabled) {\n      return;\n    }\n    let cleanedUp = false;\n    let lastX;\n    let lastY;\n    let lastInlineSize;\n    let lastBlockSize;\n    const updateElement = () => {\n      // It could be that the portal hasn't been attached to the DOM yet - ensure the ref exists and is attached DOM tree.\n      if (track.current && ref.current && document.body.contains(ref.current)) {\n        const isRtl = getIsRtl(ref.current);\n        const {\n          insetInlineStart,\n          insetBlockStart,\n          inlineSize,\n          blockSize\n        } = getLogicalBoundingClientRect(track.current);\n        // For simplicity, we just make all our calculations independent of\n        // the browser's scrolling edge. When it comes to applying the changes,\n        // translate is independent of writing direction, so we need to invert\n        // the X coordinate ourselves just before applying the values.\n        const newX = (insetInlineStart + getScrollInlineStart(document.documentElement)) * (isRtl ? -1 : 1);\n        const newY = insetBlockStart + document.documentElement.scrollTop;\n        if (lastX !== newX || lastY !== newY) {\n          ref.current.style.translate = `${newX}px ${newY}px`;\n          lastX = newX;\n          lastY = newY;\n        }\n        if (lastInlineSize !== inlineSize || lastBlockSize !== blockSize) {\n          ref.current.style.width = `${inlineSize}px`;\n          ref.current.style.height = `${blockSize}px`;\n          lastInlineSize = inlineSize;\n          lastBlockSize = blockSize;\n        }\n      }\n      if (!cleanedUp) {\n        requestAnimationFrame(updateElement);\n      }\n    };\n    updateElement();\n    return () => {\n      cleanedUp = true;\n    };\n  }, [isDisabled, track]);\n  return React.createElement(Portal, {\n    container: container\n  }, React.createElement(\"span\", {\n    ref: ref,\n    className: styles['portal-overlay']\n  }, React.createElement(\"span\", {\n    className: styles['portal-overlay-contents']\n  }, children)));\n}","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useRef","useState","getIsRtl","getLogicalBoundingClientRect","getScrollInlineStart","Portal","styles","PortalOverlay","track","isDisabled","children","ref","container","setContainer","current","newContainer","ownerDocument","createElement","body","appendChild","remove","cleanedUp","lastX","lastY","lastInlineSize","lastBlockSize","updateElement","document","contains","isRtl","insetInlineStart","insetBlockStart","inlineSize","blockSize","newX","documentElement","newY","scrollTop","style","translate","width","height","requestAnimationFrame","className"],"sources":["/Users/naman/Desktop/Portfolio/react-portfolio/node_modules/src/internal/components/drag-handle-wrapper/portal-overlay.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\n\nimport {\n  getIsRtl,\n  getLogicalBoundingClientRect,\n  getScrollInlineStart,\n  Portal,\n} from '@cloudscape-design/component-toolkit/internal';\n\nimport styles from './styles.css.js';\n\nexport default function PortalOverlay({\n  track,\n  isDisabled,\n  children,\n}: {\n  track: React.RefObject<HTMLElement | null>;\n  isDisabled: boolean;\n  children: React.ReactNode;\n}) {\n  const ref = useRef<HTMLSpanElement | null>(null);\n  const [container, setContainer] = useState<HTMLDivElement | null>(null);\n\n  useLayoutEffect(() => {\n    if (track.current) {\n      const newContainer = track.current.ownerDocument.createElement('div');\n      track.current.ownerDocument.body.appendChild(newContainer);\n      setContainer(newContainer);\n      return () => newContainer.remove();\n    }\n  }, [track]);\n\n  useEffect(() => {\n    if (track.current === null || isDisabled) {\n      return;\n    }\n\n    let cleanedUp = false;\n    let lastX: number | undefined;\n    let lastY: number | undefined;\n    let lastInlineSize: number | undefined;\n    let lastBlockSize: number | undefined;\n    const updateElement = () => {\n      // It could be that the portal hasn't been attached to the DOM yet - ensure the ref exists and is attached DOM tree.\n      if (track.current && ref.current && document.body.contains(ref.current)) {\n        const isRtl = getIsRtl(ref.current);\n        const { insetInlineStart, insetBlockStart, inlineSize, blockSize } = getLogicalBoundingClientRect(\n          track.current\n        );\n        // For simplicity, we just make all our calculations independent of\n        // the browser's scrolling edge. When it comes to applying the changes,\n        // translate is independent of writing direction, so we need to invert\n        // the X coordinate ourselves just before applying the values.\n        const newX = (insetInlineStart + getScrollInlineStart(document.documentElement)) * (isRtl ? -1 : 1);\n        const newY = insetBlockStart + document.documentElement.scrollTop;\n        if (lastX !== newX || lastY !== newY) {\n          ref.current.style.translate = `${newX}px ${newY}px`;\n          lastX = newX;\n          lastY = newY;\n        }\n        if (lastInlineSize !== inlineSize || lastBlockSize !== blockSize) {\n          ref.current.style.width = `${inlineSize}px`;\n          ref.current.style.height = `${blockSize}px`;\n          lastInlineSize = inlineSize;\n          lastBlockSize = blockSize;\n        }\n      }\n      if (!cleanedUp) {\n        requestAnimationFrame(updateElement);\n      }\n    };\n    updateElement();\n\n    return () => {\n      cleanedUp = true;\n    };\n  }, [isDisabled, track]);\n\n  return (\n    <Portal container={container}>\n      <span ref={ref} className={styles['portal-overlay']}>\n        <span className={styles['portal-overlay-contents']}>{children}</span>\n      </span>\n    </Portal>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}